using System.Net;
using Microsoft.AspNetCore.Mvc;
using Newtonsoft.Json;
using Swashbuckle.AspNetCore.Annotations;
using TCCTOBK.OperationBackend.Application.Features;

namespace TCCTOBK.OperationBackend.Api;
[Route("api/v1")]
[ApiController]
[ApiExplorerSettings(GroupName = "aochmapv1")]
public class MapPolygonController : ControllerBase
{
  public MapPolygonController()
  {

  }
  public string GEOJSON { get; set; } = "[{\"type\":\"FeatureCollection\",\"features\":[{\"type\":\"Feature\",\"properties\":{\"stroke\":\"#00990a\",\"stroke-width\":2,\"stroke-opacity\":1,\"fill\":\"#4dff6a\",\"fill-opacity\":0.5},\"geometry\":{\"coordinates\":[[[100.54634358291827,13.72678927229579],[100.54632855345409,13.726697862349297],[100.54649093701357,13.726672470692094],[100.54650400611251,13.726685483917194],[100.54651672283984,13.726755566991457],[100.54641509981234,13.72677160655671],[100.54641473017725,13.72677771227005],[100.54634358291827,13.72678927229579]]],\"type\":\"Polygon\"},\"id\":0},{\"type\":\"Feature\",\"properties\":{},\"geometry\":{\"coordinates\":[[[100.5464292185859,13.726855065030861],[100.54641690235121,13.726771206535687],[100.54651916324633,13.726755044573324],[100.54653126857926,13.726839609871035],[100.5464292185859,13.726855065030861]]],\"type\":\"Polygon\"}},{\"type\":\"Feature\",\"properties\":{},\"geometry\":{\"coordinates\":[[[100.54625820930727,13.726800502408636],[100.54624122438162,13.72671147063582],[100.54632822853688,13.726697302677962],[100.54634431875712,13.726790127213803],[100.54625820930727,13.726800502408636]]],\"type\":\"Polygon\"}},{\"type\":\"Feature\",\"properties\":{},\"geometry\":{\"coordinates\":[[[100.54624118032314,13.726712069567341],[100.54625779049559,13.726800036854769],[100.54617070778755,13.726815656448665],[100.54615423882251,13.726724842405517],[100.54624118032314,13.726712069567341]]],\"type\":\"Polygon\"}},{\"type\":\"Feature\",\"properties\":{},\"geometry\":{\"coordinates\":[[[100.54608296898442,13.72682755616242],[100.54606655958014,13.726737225390067],[100.54615434989529,13.726723941450516],[100.54617048580911,13.726814803584304],[100.54608296898442,13.72682755616242]]],\"type\":\"Polygon\"}},{\"type\":\"Feature\",\"properties\":{},\"geometry\":{\"coordinates\":[[[100.54596698649834,13.726923094420428],[100.54593941424434,13.726770627456702],[100.5459510794289,13.726752427563895],[100.54606702429476,13.72673491445903],[100.54608257787453,13.726827974277242],[100.54605288467741,13.72683209500596],[100.54606596382325,13.726909358662368],[100.54596698649834,13.726923094420428]]],\"type\":\"Polygon\"}},{\"type\":\"Feature\",\"properties\":{},\"geometry\":{\"coordinates\":[[[100.54598192666901,13.727006792367334],[100.54596607027668,13.726924588183365],[100.54606510387265,13.72690839007656],[100.54608193527349,13.726992053141132],[100.54598192666901,13.727006792367334]]],\"type\":\"Polygon\"}},{\"type\":\"Feature\",\"properties\":{},\"geometry\":{\"coordinates\":[[[100.5461434894766,13.72717019378149],[100.54602778777979,13.727188848407096],[100.54601180347748,13.72717635702621],[100.54598237656717,13.727007874919707],[100.54608237913192,13.726993618074147],[100.54609178256823,13.727055724240046],[100.54612117042007,13.727048834705684],[100.5461434894766,13.72717019378149]]],\"type\":\"Polygon\"}},{\"type\":\"Feature\",\"properties\":{},\"geometry\":{\"coordinates\":[[[100.54614436909588,13.727170043273048],[100.54612340930294,13.727049888705935],[100.54620811587472,13.727036810492507],[100.54623051888296,13.727157451421547],[100.54614436909588,13.727170043273048]]],\"type\":\"Polygon\"}},{\"type\":\"Feature\",\"properties\":{},\"geometry\":{\"coordinates\":[[[100.54623083041764,13.727158713403085],[100.54620820058119,13.727036896537186],[100.54629533405654,13.727022908391561],[100.54631627622445,13.727144470673181],[100.54623083041764,13.727158713403085]]],\"type\":\"Polygon\"}},{\"type\":\"Feature\",\"properties\":{},\"geometry\":{\"coordinates\":[[[100.54631737311098,13.7271456430298],[100.54629500535299,13.727022186691855],[100.54638114926496,13.72701006406622],[100.54640402355466,13.727131649183406],[100.54631737311098,13.7271456430298]]],\"type\":\"Polygon\"}},{\"type\":\"Feature\",\"properties\":{},\"geometry\":{\"coordinates\":[[[100.54640389897247,13.727130615487667],[100.54638101880778,13.727009499603753],[100.54645335816548,13.727000264335189],[100.5464583953655,13.727022381102884],[100.54655692411671,13.727005007827628],[100.54657249881092,13.727092247580472],[100.54655975201518,13.727107114661663],[100.54640389897247,13.727130615487667]]],\"type\":\"Polygon\"}},{\"type\":\"Feature\",\"properties\":{},\"geometry\":{\"coordinates\":[[[100.54655764062005,13.727005830411414],[100.54645792585364,13.727021404200386],[100.54644338421838,13.726938279678862],[100.5465439349781,13.726922312099163],[100.54655764062005,13.727005830411414]]],\"type\":\"Polygon\"}},{\"type\":\"Feature\",\"properties\":{},\"geometry\":{\"coordinates\":[[[100.54654413513362,13.726922919958014],[100.54644463062743,13.726938294405798],[100.54642904779001,13.726855359383592],[100.54653001402073,13.726839396707177],[100.54654413513362,13.726922919958014]]],\"type\":\"Polygon\"}},{\"type\":\"Feature\",\"properties\":{},\"geometry\":{\"coordinates\":[[[100.54618506122131,13.726937463678723],[100.54620007871432,13.727022523194563],[100.54617197132131,13.727027683992347],[100.54615479497363,13.726942028584546],[100.54618506122131,13.726937463678723]]],\"type\":\"Polygon\"}},{\"type\":\"Feature\",\"properties\":{},\"geometry\":{\"coordinates\":[[[100.54615422035374,13.726941929336931],[100.54617030936953,13.727027229789456],[100.54610553242372,13.727038630440418],[100.54608986775031,13.726950293824103],[100.54615422035374,13.726941929336931]]],\"type\":\"Polygon\"}},{\"type\":\"Feature\",\"properties\":{},\"geometry\":{\"coordinates\":[[[100.54616533853289,13.7268323570744],[100.54618060579469,13.726921259746362],[100.54615003852177,13.726925886119844],[100.54613663877171,13.726836147512984],[100.54616533853289,13.7268323570744]]],\"type\":\"Polygon\"}},{\"type\":\"Feature\",\"properties\":{},\"geometry\":{\"coordinates\":[[[100.54622125548809,13.72682651273334],[100.54623884533117,13.72691285072527],[100.54621021152894,13.72691618612609],[100.54619520292289,13.726830911838022],[100.54622125548809,13.72682651273334]]],\"type\":\"Polygon\"}},{\"type\":\"Feature\",\"properties\":{},\"geometry\":{\"coordinates\":[[[100.5462541515077,13.726817008554647],[100.54626865199458,13.726908565182228],[100.54624027758922,13.726912897191298],[100.546221595693,13.726821523102117],[100.5462541515077,13.726817008554647]]],\"type\":\"Polygon\"}},{\"type\":\"Feature\",\"properties\":{},\"geometry\":{\"coordinates\":[[[100.54628203878036,13.726818576278319],[100.54629505709039,13.72689167828078],[100.54626621098134,13.726896682111345],[100.54625388424347,13.726824038342428],[100.54628203878036,13.726818576278319]]],\"type\":\"Polygon\"}},{\"type\":\"Feature\",\"properties\":{},\"geometry\":{\"coordinates\":[[[100.54631127677135,13.726808818800777],[100.54632543147119,13.726900146316112],[100.54629729291861,13.726904142414725],[100.5462813383341,13.726812852772156],[100.54631127677135,13.726808818800777]]],\"type\":\"Polygon\"}},{\"type\":\"Feature\",\"properties\":{},\"geometry\":{\"coordinates\":[[[100.54640234198615,13.726794108992081],[100.54641818663652,13.726884833615927],[100.54635700458118,13.726895482046672],[100.54634110496369,13.726804474913394],[100.54640234198615,13.726794108992081]]],\"type\":\"Polygon\"}},{\"type\":\"Feature\",\"properties\":{},\"geometry\":{\"coordinates\":[[[100.5463411049634,13.72680447490984],[100.54634642783742,13.726838025065106],[100.54631618259782,13.726843578397038],[100.54630965745935,13.726808493354369],[100.5463411049634,13.72680447490984]]],\"type\":\"Polygon\"}},{\"type\":\"Feature\",\"properties\":{},\"geometry\":{\"coordinates\":[[[100.54634619198657,13.726838360975748],[100.54635631300681,13.726895023811338],[100.54632701117646,13.726899233499537],[100.54631705505761,13.726843418204652],[100.54634619198657,13.726838360975748]]],\"type\":\"Polygon\"}},{\"type\":\"Feature\",\"properties\":{},\"geometry\":{\"coordinates\":[[[100.54623953181255,13.726928978995787],[100.54625684464605,13.727014831032221],[100.54622669218594,13.727019479974885],[100.54621231913274,13.726933088166746],[100.54623953181255,13.726928978995787]]],\"type\":\"Polygon\"}},{\"type\":\"Feature\",\"properties\":{},\"geometry\":{\"coordinates\":[[[100.54627008977786,13.72692350740023],[100.54628469838002,13.72700998959182],[100.54625699401572,13.727014910655967],[100.54624022195253,13.72692783130033],[100.54627008977786,13.72692350740023]]],\"type\":\"Polygon\"}},{\"type\":\"Feature\",\"properties\":{},\"geometry\":{\"coordinates\":[[[100.54630492488246,13.726949097842763],[100.54629814169084,13.72691686518813],[100.54632946993001,13.726911278742264],[100.54634444308203,13.727000511466784],[100.54631580360507,13.727006764360027],[100.54631204724149,13.727001487670265],[100.54628537139507,13.727005556956428],[100.54628455573828,13.727011010180831],[100.54627512837584,13.72695291144828],[100.54630492488246,13.726949097842763]]],\"type\":\"Polygon\"}},{\"type\":\"Feature\",\"properties\":{},\"geometry\":{\"coordinates\":[[[100.5463643987959,13.726940698591491],[100.54637356669957,13.726997142037035],[100.54634495657115,13.72700109796007],[100.54633498880634,13.72694441110248],[100.5463643987959,13.726940698591491]]],\"type\":\"Polygon\"}},{\"type\":\"Feature\",\"properties\":{},\"geometry\":{\"coordinates\":[[[100.54642579772502,13.726923750911737],[100.54642980443839,13.72695087544578],[100.5463682321514,13.726958555074532],[100.54636358551642,13.726934068651786],[100.54642579772502,13.726923750911737]]],\"type\":\"Polygon\"}},{\"type\":\"Feature\",\"properties\":{},\"geometry\":{\"coordinates\":[[100.5461036931805,13.726842063641726],[100.54607212796464,13.726846730052273],[100.54608018712645,13.726887680179885]],\"type\":\"LineString\"}},{\"type\":\"Feature\",\"properties\":{},\"geometry\":{\"coordinates\":[[[100.54611401032906,13.72690217066743],[100.54611907169192,13.726930427911327],[100.54608657998807,13.726935129580056],[100.54608308398645,13.726907257519812],[100.54611401032906,13.72690217066743]]],\"type\":\"Polygon\"}}]}]";

  [HttpGet("Polygon")]
  [SwaggerOperation(Summary = "")]
  [ProducesResponseType(typeof(List<string>), (int)HttpStatusCode.OK)]
  [ProducesResponseType(typeof(FailedResult), (int)HttpStatusCode.InternalServerError)]
  [ProducesResponseType(typeof(void), (int)HttpStatusCode.Unauthorized)]

  public async Task<IActionResult> GetMembers()
  {
    var datastring = GEOJSON;
    var data = JsonConvert.DeserializeObject<List<Polygon>>(datastring);
    return Ok(data);
  }

  private class Polygon
  {
    public string type { get; set; } = default!;
    public List<GEOFeature> features { get; set; } = new();
  }

  private class GEOFeature
  {
    public string type { get; set; } = default!;
    public GEOProperties properties { get; set; } = default!;
    public List<Geometry> geometry { get; set; } = new();
    public int id { get; set; }
  }
  private class Geometry
  {
    public List<List<List<int>>> coordinates { get; set; }
    public string type { get; set; }
  }

  public class Coordinates
  {

  }
  private class GEOProperties
  {
    public string stroke { get; set; } = default!;
    public string strokewidth { get; set; } = default!;
    public string strokeopacity { get; set; } = default!;
    public string fill { get; set; } = default!;
    public string fillopacity { get; set; } = default!;
  }
}


