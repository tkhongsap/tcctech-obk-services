START TRANSACTION;

ALTER TABLE "trSchedulePlan" DROP CONSTRAINT "FK_trSchedulePlan_SOCUser_MemberId";

ALTER TABLE "trSchedulePlan" DROP CONSTRAINT "FK_trSchedulePlan_taMember_MID";

DROP INDEX "IX_trSchedulePlan_MemberId";

ALTER TABLE "trSchedulePlan" DROP COLUMN "MemberId";

UPDATE "trSchedulePlan" SET "MID" = '00000000-0000-0000-0000-000000000000' WHERE "MID" IS NULL;
ALTER TABLE "trSchedulePlan" ALTER COLUMN "MID" SET NOT NULL;
UPDATE "trSchedulePlan" SET "MID" = "MemberId" WHERE "MID" IS NULL;
ALTER TABLE "trSchedulePlan" ALTER COLUMN "MID" SET DEFAULT '00000000-0000-0000-0000-000000000000';

UPDATE "Tenant" SET "CreatedDate" = TIMESTAMP '2025-02-16T23:08:08.369639', "UpdatedDate" = TIMESTAMP '2025-02-16T23:08:08.390235'
WHERE "TID" = '4199e4de-bdf8-48f8-a8a8-a5b31756a748';

UPDATE "Tenant" SET "CreatedDate" = TIMESTAMP '2025-02-16T23:08:08.390267', "UpdatedDate" = TIMESTAMP '2025-02-16T23:08:08.390267'
WHERE "TID" = 'caa4ebec-15c8-4d6b-9985-6d6b66f94e63';

UPDATE "trRole" SET "CreatedDate" = TIMESTAMP '2025-02-16T23:08:08.39638', "UpdatedDate" = TIMESTAMP '2025-02-16T23:08:08.396381'
WHERE "RID" = '18a79217-9fa7-460d-bccc-e74285b07531';

UPDATE "trRole" SET "CreatedDate" = TIMESTAMP '2025-02-16T23:08:08.396382', "UpdatedDate" = TIMESTAMP '2025-02-16T23:08:08.396382'
WHERE "RID" = 'bd69a88e-d6c1-42a1-8a3a-628843459909';

UPDATE "trRole" SET "CreatedDate" = TIMESTAMP '2025-02-16T23:08:08.396382', "UpdatedDate" = TIMESTAMP '2025-02-16T23:08:08.396382'
WHERE "RID" = 'c01c5086-cfa5-44ca-89d7-baa2c1accea6';

UPDATE "trRole" SET "CreatedDate" = TIMESTAMP '2025-02-16T23:08:08.396381', "UpdatedDate" = TIMESTAMP '2025-02-16T23:08:08.396382'
WHERE "RID" = 'd6016437-8b0f-4b0e-8175-5a11ffc480f5';

UPDATE "trRole" SET "CreatedDate" = TIMESTAMP '2025-02-16T23:08:08.396381', "UpdatedDate" = TIMESTAMP '2025-02-16T23:08:08.396381'
WHERE "RID" = 'f2cf879b-34f3-41da-9445-ee3bc590f224';

UPDATE "trRole" SET "CreatedDate" = TIMESTAMP '2025-02-16T23:08:08.396379', "UpdatedDate" = TIMESTAMP '2025-02-16T23:08:08.39638'
WHERE "RID" = 'fcddbf6b-88b8-4fae-ade7-63150ce1f1ec';

ALTER TABLE "trSchedulePlan" ADD CONSTRAINT "FK_trSchedulePlan_taMember_MID" FOREIGN KEY ("MID") REFERENCES "taMember" ("MID") ON DELETE CASCADE;

INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20250216160809_removeSOCUserSchedulePlan', '8.0.4');

COMMIT;

